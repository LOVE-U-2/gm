<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tic-Tac-Toe ‚Äî Stylish</title>
<style>
  :root{
    --bg1: #f0f7ff;
    --card: #ffffff;
    --accent: #0b78d1;
    --accent-2: #6c5ce7;
    --muted: #6b7280;
    --win: #16a34a;
    --lose: #ef4444;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    font-family: Arial;
    background: linear-gradient(135deg,var(--bg1), #ff3ddc 60%);
    padding:28px;
    color:#0b1720;
  }
  .container{
    width:min(920px,96%);
    background:var(--card);
    border-radius:16px;
    box-shadow:0 18px 50px rgba(2, 20, 112, 0.66);
    display:grid;
    grid-template-columns: 360px 1fr;
    gap:20px;
    padding:22px;
    align-items:start;
  }
  header{
    grid-column:1/-1;
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
  }
  h1{
    margin:0;
    font-size:20px;
    color:var(--accent);
    display:flex;
    gap:10px;
    align-items:center;
  }
  .controls{
    display:flex;
    gap:10px;
    align-items:center;
  }
  select, button, input[type=radio] + label{
    font-size:14px;
  }
  .panel{
    padding:18px;
    background:linear-gradient(180deg,#9affa7,#e3fb79);
    border-radius:12px;
    border:1px solid rgba(11,120,209,0.06);
  }
  .left{
    display:flex;
    flex-direction:column;
    gap:14px;
  }

  /* board */
  .board-wrap{
    display:flex;
    gap:14px;
    align-items:center;
    justify-content:center;
  }
  .board{
    width:320px;
    height:350px;
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:10px;
    background:linear-gradient(180deg,#fe4848,#f662fe);
    padding:12px;
    border-radius:14px;
    box-shadow: inset 0 2px 6px rgba(1, 58, 101, 0.121);
  }
  .cell{
    background:#ffffff;
    height:100px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:48px;
    font-weight:700;
    color:#0b1720;
    border-radius:10px;
    cursor:pointer;
    user-select:none;
    transition:transform .12s ease, background .12s;
    box-shadow:0 6px 16px rgba(11, 23, 32, 0.319);
  }
  .cell:hover{ transform:translateY(-4px) }
  .cell.disabled{ cursor:default; opacity:0.9; transform:none; }
  .cell.x{ color: var(--accent); }
  .cell.o{ color: var(--accent-2); }

  /* right column: info & score */
  .right{
    display:flex;
    flex-direction:column;
    gap:14px;
  }
  .status{
    font-weight:600;
    color:#0b1720;
  }
  .sub{
    color:var(--muted);
    font-size:13px;
  }
  .scoreboard{
    display:flex;
    gap:12px;
    align-items:center;
  }
  .score{
    background:linear-gradient(180deg,#fcfcff,#fbfbff);
    padding:12px 14px;
    border-radius:12px;
    border:1px solid rgba(0,0,0,0.04);
    min-width:90px;
    text-align:center;
  }
  .score .num{ font-size:20px; font-weight:700; color:var(--accent); }
  .actions{
    display:flex;
    gap:10px;
    align-items:center;
  }
  .btn{
    background:var(--accent);
    color:#fff;
    border:none;
    padding:10px 14px;
    border-radius:10px;
    cursor:pointer;
    font-weight:600;
    transition:transform .12s;
  }
  .btn:hover{ transform:translateY(-3px) }
  .btn.ghost{
    background:transparent;
    color:var(--accent);
    border:1px solid rgba(11,120,209,0.12);
  }

  .mode-row{
    display:flex;
    gap:8px;
    align-items:center;
    padding:6px 0;
  }
  .radio{
    display:inline-flex;
    gap:6px;
    align-items:center;
    cursor:pointer;
    user-select:none;
    font-size:14px;
  }

  /* highlight win */
  .cell.win{
    background:linear-gradient(90deg, rgba(22,163,74,0.08), rgba(11,120,209,0.04));
    box-shadow:0 10px 30px rgba(16,185,129,0.06);
    transform:scale(1.04);
  }

  footer{ grid-column:1/-1; text-align:center; color:var(--muted); font-size:18px; margin-top:6px; }

  /* Extra mobile responsiveness + overflow fix */
  @media (max-width: 600px) {
    body {
      padding: 10px;
      align-items: flex-start;
    }

    .container {
      grid-template-columns: 1fr;
      width: 100%;
      padding: 14px;
      gap: 12px;
    }

    header {
      flex-direction: column;
      gap: 8px;
      text-align: center;
    }

    h1 {
      font-size: 18px;
    }

    .board-wrap {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden; /* prevents white cells overflow */
    }

    .board {
      width: 90vw;
      max-width: 280px;
      aspect-ratio: 1 / 1;
      height: auto;
      gap: 6px;
      padding: 8px;
    }

    .cell {
      height: auto;
      aspect-ratio: 1 / 1;
      font-size: clamp(28px, 8vw, 40px);
      border-radius: 8px;
    }

    .panel {
      padding: 12px;
    }

    .controls, .actions, .scoreboard {
      flex-wrap: wrap;
      justify-content: center;
    }

    .btn {
      width: 100%;
      font-size: 15px;
      padding: 10px;
    }

    footer {
      font-size: 14px;
      line-height: 1.4;
    }
  }
</style>
</head>
<body>
  <div class="container" role="application" aria-label="Tic Tac Toe game">
    <header>
      <h1>üß© Tic-Tac-Toe</h1>
      <div class="controls">
        <div class="sub">Mode</div>
        <select id="mode" title="Mode">
          <option value="pvp">2-Player (Local)</option>
          <option value="cpu">Play vs CPU</option>
        </select>
      </div>
    </header>

    <div class="left panel">
      <div class="board-wrap" aria-hidden="false">
        <div class="board" id="board" role="grid" aria-label="Game board">
          <!-- 9 cells created by JS -->
        </div>
      </div>

      <div style="display:flex;gap:10px;justify-content:space-between;align-items:center;">
        <div>
          <div class="sub">Pick your mark</div>
          <div class="mode-row" style="margin-top:6px;">
            <label class="radio"><input type="radio" name="mark" value="X" checked> <span>X</span></label>
            <label class="radio"><input type="radio" name="mark" value="O"> <span>O</span></label>
            <label style="margin-left:10px;" class="radio"><input type="checkbox" id="firstCheck"> <span>Go first</span></label>
          </div>
        </div>
        <div style="text-align:right">
          <div class="sub">Round</div>
          <div style="font-weight:700;font-size:18px" id="roundNum">1</div>
        </div>
      </div>
    </div>

    <div class="right panel">
      <div>
        <div class="status" id="statusText">Your move: <span id="turnIndicator">X</span></div>
        <div class="sub" id="hint">Choose mode and mark, then play ‚Äî CPU is unbeatable.</div>
      </div>

      <div>
        <div class="sub">Scoreboard</div>
        <div class="scoreboard" style="margin-top:8px;">
          <div class="score">
            <div class="sub">You</div>
            <div class="num" id="youScore">0</div>
          </div>
          <div class="score">
            <div class="sub">Ties</div>
            <div class="num" id="tieScore">0</div>
          </div>
          <div class="score">
            <div class="sub">CPU / Player 2</div>
            <div class="num" id="opScore">0</div>
          </div>
        </div>
      </div>

      <div style="margin-top:10px">
        <div class="sub">Actions</div>
        <div class="actions" style="margin-top:8px;">
          <button class="btn" id="restartBtn">Restart Round</button>
          <button class="btn ghost" id="resetBtn">Reset Scores</button>
        </div>
      </div>

      <div style="margin-top:12px;" class="sub">
        Tips: Click a cell to play. Against CPU, pick your mark (X goes first). CPU uses minimax ‚Äî it's strong!
      </div>
    </div>

    <footer>2025 Made with ‚ù§Ô∏è ‚Äî Bhabatosh Barman . 9064899089</footer>
  </div>

<script>
/* Tic-Tac-Toe logic with minimax CPU */
const boardEl = document.getElementById('board');
const modeEl = document.getElementById('mode');
const turnIndicator = document.getElementById('turnIndicator');
const statusText = document.getElementById('statusText');
const hint = document.getElementById('hint');
const youScoreEl = document.getElementById('youScore');
const tieScoreEl = document.getElementById('tieScore');
const opScoreEl = document.getElementById('opScore');
const restartBtn = document.getElementById('restartBtn');
const resetBtn = document.getElementById('resetBtn');
const roundNumEl = document.getElementById('roundNum');

let board = Array(9).fill(null); // null / 'X' / 'O'
let humanMark = 'X';
let aiMark = 'O';
let currentTurn = 'X';
let mode = 'pvp';
let round = 1;

let scores = { you:0, tie:0, op:0 };

function createBoard(){
  boardEl.innerHTML = '';
  for(let i=0;i<9;i++){
    const cell = document.createElement('div');
    cell.className = 'cell';
    cell.dataset.index = i;
    cell.setAttribute('role','button');
    cell.addEventListener('click', onCellClick);
    boardEl.appendChild(cell);
  }
}
createBoard();

function updateUI(){
  const cellEls = boardEl.querySelectorAll('.cell');
  cellEls.forEach((el,i)=>{
    el.classList.remove('x','o','disabled','win');
    el.textContent = board[i] || '';
    if(board[i]) {
      el.classList.add(board[i].toLowerCase());
      el.classList.add('disabled');
    } else {
      el.classList.remove('disabled');
    }
  });
  turnIndicator.textContent = currentTurn;
  youScoreEl.textContent = scores.you;
  tieScoreEl.textContent = scores.tie;
  opScoreEl.textContent = scores.op;
  roundNumEl.textContent = round;
}

/* helper: winning combos */
const wins = [
  [0,1,2],[3,4,5],[6,7,8],
  [0,3,6],[1,4,7],[2,5,8],
  [0,4,8],[2,4,6]
];

function checkWin(bd){
  for(const combo of wins){
    const [a,b,c] = combo;
    if(bd[a] && bd[a] === bd[b] && bd[a] === bd[c]) return {winner: bd[a], combo};
  }
  if(bd.every(Boolean)) return {winner: 'tie'};
  return null;
}

function endRound(result){
  // result: {winner, combo} or {winner:'tie'}
  const cellEls = boardEl.querySelectorAll('.cell');
  if(result && result.winner !== 'tie'){
    // highlight combo
    result.combo.forEach(i => cellEls[i].classList.add('win'));
    if(result.winner === humanMark){
      scores.you++;
      statusText.textContent = `You win! (${humanMark})`;
    } else {
      scores.op++;
      statusText.textContent = `${mode === 'cpu' ? 'CPU' : 'Player 2'} wins! (${result.winner})`;
    }
  } else {
    scores.tie++;
    statusText.textContent = `It's a draw.`;
  }
  // disable remaining cells
  cellEls.forEach(el => el.classList.add('disabled'));
  updateUI();
}

/* player action */
function onCellClick(e){
  const idx = +e.currentTarget.dataset.index;
  if(board[idx] || (mode==='cpu' && currentTurn===aiMark && currentTurn)) return;
  makeMove(idx, currentTurn);
  const result = checkWin(board);
  if(result){
    endRound(result);
    return;
  }
  currentTurn = (currentTurn === 'X' ? 'O' : 'X');
  updateUI();

  if(mode === 'cpu' && currentTurn === aiMark){
    // small delay for UX
    setTimeout(()=> {
      const aiMove = bestMove(board.slice(), aiMark);
      makeMove(aiMove, aiMark);
      const res2 = checkWin(board);
      if(res2){
        endRound(res2);
        return;
      }
      currentTurn = (currentTurn === 'X' ? 'O' : 'X');
      updateUI();
    }, 300);
  }
}

function makeMove(index, mark){
  if(board[index]) return false;
  board[index] = mark;
  // simple animation
  const el = boardEl.querySelector(`.cell[data-index="${index}"]`);
  if(el){
    el.classList.add('disabled');
    el.textContent = mark;
    el.classList.add(mark.toLowerCase());
    el.animate([{transform:'scale(0.8)'},{transform:'scale(1)'}],{duration:140,easing:'cubic-bezier(.2,.9,.3,1)'});
  }
  return true;
}

/* minimax for unbeatable CPU */
function bestMove(bd, player){
  // If first move and center empty, take center
  if(bd.every(v=>v===null) && bd[4]===null) return 4;

  const opponent = (player === 'X') ? 'O' : 'X';
  let bestScore = -Infinity;
  let move = null;
  for(let i=0;i<9;i++){
    if(!bd[i]){
      bd[i] = player;
      const score = minimax(bd, false, player, opponent);
      bd[i] = null;
      if(score > bestScore){
        bestScore = score;
        move = i;
      }
    }
  }
  return move;
}

function minimax(bd, isMaximizing, player, opponent){
  const res = checkWin(bd);
  if(res){
    if(res.winner === player) return 10;
    if(res.winner === opponent) return -10;
    if(res.winner === 'tie') return 0;
  }
  if(isMaximizing){
    let best = -Infinity;
    for(let i=0;i<9;i++){
      if(!bd[i]){
        bd[i] = player;
        best = Math.max(best, minimax(bd, false, player, opponent));
        bd[i] = null;
      }
    }
    return best;
  } else {
    let best = Infinity;
    for(let i=0;i<9;i++){
      if(!bd[i]){
        bd[i] = opponent;
        best = Math.min(best, minimax(bd, true, player, opponent));
        bd[i] = null;
      }
    }
    return best;
  }
}

/* UI controls */
modeEl.addEventListener('change', ()=>{
  mode = modeEl.value;
  resetRound(true);
});

document.querySelectorAll('input[name="mark"]').forEach(r=>{
  r.addEventListener('change', (e)=>{
    humanMark = e.target.value;
    aiMark = (humanMark === 'X') ? 'O' : 'X';
    resetRound(true);
  });
});

document.getElementById('firstCheck').addEventListener('change', (e)=>{
  const goFirst = e.target.checked;
  if(goFirst){
    currentTurn = humanMark;
  } else {
    currentTurn = (humanMark === 'X') ? 'O' : 'X';
  }
  resetRound(true);
});

restartBtn.addEventListener('click', ()=> resetRound(false));
resetBtn.addEventListener('click', ()=>{
  scores = {you:0,tie:0,op:0};
  round = 1;
  resetRound(true);
});

/* reset/start round */
function resetRound(hard){
  board = Array(9).fill(null);
  // set current turn logic
  const goFirstBox = document.getElementById('firstCheck');
  const goFirst = goFirstBox.checked;
  if(mode === 'cpu'){
    if(goFirst){
      currentTurn = humanMark;
    } else {
      currentTurn = aiMark;
    }
  } else {
    // pvp: X always starts
    currentTurn = 'X';
  }

  if(hard){
    // if human changed marks or hard reset, keep scores but update hint
    hint.textContent = (mode==='cpu') ? 'CPU = Unbeatable. Pick your mark and play.' : 'Local two-player. X starts.';
  }
  // If CPU starts, make CPU move immediately
  updateUI();
  if(mode === 'cpu' && currentTurn === aiMark){
    setTimeout(()=>{
      const mv = bestMove(board.slice(), aiMark);
      makeMove(mv, aiMark);
      currentTurn = (currentTurn === 'X' ? 'O' : 'X');
      updateUI();
    }, 250);
  }
  // if new round increment when hard=false? We increment when user clicks RestartRound
  if(!hard) round++;
  updateUI();
  statusText.textContent = `Your move: ${humanMark} ‚Äî Mode: ${mode === 'cpu' ? 'vs CPU' : '2P'}`;
}

/* initialize */
(function init(){
  // default settings
  humanMark = document.querySelector('input[name="mark"]:checked').value;
  aiMark = (humanMark === 'X') ? 'O' : 'X';
  mode = modeEl.value;
  currentTurn = 'X';
  updateUI();
  hint.textContent = 'Pick your mark and start playing.';
})();

</script>
</body>
</html>
